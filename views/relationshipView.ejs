<%- include("partials/header") %>

<div class="container mt-4">

  <div class="card shadow-sm border-0 rounded-4 overflow-hidden">

    <!-- Carousel -->
    <div id="relCarousel" class="carousel slide">
      <div class="carousel-inner">

        <% if (rel.image1) { %>
          <div class="carousel-item active">
            <img src="/uploads/<%= rel.image1 %>" class="d-block w-100" style="height:400px;object-fit:cover;">
          </div>
        <% } %>

        <% if (rel.image2) { %>
          <div class="carousel-item">
            <img src="/uploads/<%= rel.image2 %>" class="d-block w-100" style="height:400px;object-fit:cover;">
          </div>
        <% } %>

        <% if (rel.image3) { %>
          <div class="carousel-item">
            <img src="/uploads/<%= rel.image3 %>" class="d-block w-100" style="height:400px;object-fit:cover;">
          </div>
        <% } %>

      </div>

      <button class="carousel-control-prev" type="button" data-bs-target="#relCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#relCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
      </button>
    </div>

    <!-- Details -->
    <div class="card-body p-4">
      <h3><%= rel.name %>, <%= rel.age %></h3>
      <p class="text-muted"><%= rel.city %> â€¢ <%= rel.sex %></p>

      <p><strong>Looking for:</strong> <%= rel.looking_for %></p>
      <p><strong>Bio:</strong> <%= rel.bio %></p>
      <p><strong>Thought:</strong> <%= rel.thought %></p>
      <p><strong>Contact:</strong> <%= rel.contact %></p>

      <% if (isOwner) { %>
        <button class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#editRelModal">
          Edit
        </button>
        <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteRelModal">
          Delete
        </button>
      <% } %>

    </div>

  </div>

</div>



<!-- EDIT MODAL -->
<div class="modal fade" id="editRelModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <form action="/relationships/edit/<%= rel.post_id %>" method="POST">
        <div class="modal-header">
          <h5>Edit Profile</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input name="bio" class="form-control mb-2" value="<%= rel.bio %>">
          <input name="city" class="form-control mb-2" value="<%= rel.city %>">
          <input name="contact" class="form-control" value="<%= rel.contact %>">
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- DELETE MODAL -->
<div class="modal fade" id="deleteRelModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body text-center">
        Delete this profile?
      </div>
      <div class="modal-footer justify-content-center">
        <form action="/relationships/delete/<%= rel.post_id %>" method="POST">
          <button class="btn btn-danger">Delete</button>
        </form>
      </div>
    </div>
  </div>
</div>


<%- include("partials/footer") %>
