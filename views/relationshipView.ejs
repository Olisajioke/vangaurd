<%- include("partials/header") %>

<div class="rel-bg py-5">

  <div class="rel-page-wrap">

    <div class="rel-profile-card card border-0 rounded-4 overflow-hidden">

      <!-- Carousel -->
      <div id="relCarousel" class="carousel slide rel-carousel">
        <div class="carousel-inner">

          <% if (rel.image1) { %>
            <div class="carousel-item active">
              <img src="/uploads/<%= rel.image1 %>" class="rel-carousel-img">
            </div>
          <% } %>

          <% if (rel.image2) { %>
            <div class="carousel-item">
              <img src="/uploads/<%= rel.image2 %>" class="rel-carousel-img">
            </div>
          <% } %>

          <% if (rel.image3) { %>
            <div class="carousel-item">
              <img src="/uploads/<%= rel.image3 %>" class="rel-carousel-img">
            </div>
          <% } %>

        </div>

        <% if (rel.image2 || rel.image3) { %>
          <button class="carousel-control-prev" type="button" data-bs-target="#relCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#relCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
          </button>
        <% } %>
      </div>

      <!-- Details -->
      <div class="card-body p-4 rel-body">

        <div class="rel-header mb-3">
          <h3 class="rel-name">
            <%= rel.name %><% if (rel.age) { %>, <%= rel.age %><% } %>
          </h3>
          <div class="rel-sub">
            <%= rel.city || "—" %>
            <% if (rel.sex) { %> • <%= rel.sex %><% } %>
          </div>
        </div>

        <div class="rel-chip mb-3">
          Looking for <b><%= rel.looking_for || "—" %></b>
        </div>

        <% if (rel.contact) { %>
          <div class="rel-contact mb-3">
            <a href="https://wa.me/<%= String(rel.contact).replace(/\D/g,'') %>"
               target="_blank"
               class="rel-whatsapp">
               <i class="bi bi-chat-heart"></i>
               Message on WhatsApp
            </a>
          </div>
        <% } %>

        <% if (rel.bio) { %>
          <div class="rel-section mb-3">
            <div class="rel-section-title">About Me: </div>
            <div class="rel-section-text"><%= rel.bio %></div>
          </div>
        <% } %>

        <% if (rel.thought) { %>
          <div class="rel-section mb-3">
            <div class="rel-section-title">Personal Thought: </div>
            <div class="rel-section-text"><%= rel.thought %></div>
          </div>
        <% } %>

        <% if (isOwner || isAdmin) { %>
          <div class="mt-4 d-flex gap-2">
            <button class="btn rel-btn-edit" data-bs-toggle="modal" data-bs-target="#editRelModal">
              Edit
            </button>
            <button class="btn rel-btn-delete" data-bs-toggle="modal" data-bs-target="#deleteRelModal">
              Delete
            </button>
          </div>
        <% } %>

      </div>

    </div>

  </div>

</div>

<% if (isOwner || isAdmin) { %>
  <%- include("partials/editRelationshipModal") %>
  <%- include("partials/deleteRelationshipModal") %>
<% } %>
<style>
/* BACKGROUND */
.rel-bg {
  background:
    radial-gradient(900px 500px at 10% 10%, rgba(255,140,160,.18), transparent 60%),
    radial-gradient(800px 400px at 90% 20%, rgba(210,120,150,.14), transparent 60%),
    linear-gradient(180deg,#3b2321,#5a3431);
}

/* WIDTH */
.rel-page-wrap {
  max-width: 820px;
  margin: 0 auto;
}

/* CARD */
.rel-profile-card {
  background: linear-gradient(180deg,#fff,#fff6f7);
  box-shadow: 0 20px 60px rgba(0,0,0,.35);
}

/* CAROUSEL */
.rel-carousel-img {
  width: 100%;
  height: 420px;
  object-fit: cover;
}

/* BODY */
.rel-body {
  color: #3b2a28;
}

/* HEADER */
.rel-name {
  font-weight: 700;
  margin-bottom: 4px;
}

.rel-sub {
  color: #8b6b68;
  font-size: .95rem;
}

/* CHIP */
.rel-chip {
  display: inline-block;
  background: rgba(255,120,140,.15);
  color: #7a3c3c;
  padding: 6px 12px;
  border-radius: 999px;
  font-size: .9rem;
}

/* CONTACT BUTTON */
.rel-whatsapp {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: linear-gradient(135deg,#ff7f96,#ff5c7a);
  color: #fff;
  padding: 8px 14px;
  border-radius: 999px;
  text-decoration: none;
  font-size: .9rem;
  box-shadow: 0 6px 18px rgba(255,90,120,.35);
  transition: transform .15s ease, box-shadow .15s ease;
}

.rel-whatsapp:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 24px rgba(255,90,120,.45);
  color: #fff;
}

/* SECTIONS */
.rel-section-title {
  font-weight: 600;
  margin-bottom: 4px;
  color: #7a3c3c;
}

.rel-section-text {
  color: #4b2e2b;
}

/* OWNER BUTTONS */
.rel-btn-edit {
  background: #f3e7e7;
  color: #5a3431;
  border-radius: 8px;
}

.rel-btn-delete {
  background: #7a3c3c;
  color: #fff;
  border-radius: 8px;
}

.rel-btn-edit:hover { background:#e8dada; }
.rel-btn-delete:hover { background:#5f2c2c; }



/* EDIT MODAL */
.rel-edit-modal {
  background: linear-gradient(180deg,#fff,#fff5f6);
}

.rel-edit-header {
  background: linear-gradient(135deg,#ff7f96,#d94f70);
  padding: 22px 20px 26px;
  position: relative;
}

.rel-edit-title {
  font-size: 1.4rem;
  font-weight: 700;
}

.rel-edit-sub {
  font-size: .9rem;
  opacity: .9;
}

.rel-edit-header .btn-close {
  position: absolute;
  top: 14px;
  right: 14px;
}

/* SECTIONS */
.rel-edit-section {
  margin-bottom: 26px;
}

.rel-edit-section-title {
  font-weight: 700;
  color: #7a3c3c;
  margin-bottom: 12px;
}

/* INPUTS */
.rel-label {
  font-size: .85rem;
  color: #8b6b68;
  margin-bottom: 4px;
}

.rel-input {
  border-radius: 10px;
  border: 1px solid #ead6d8;
}

.rel-input:focus {
  border-color: #ff7f96;
  box-shadow: 0 0 0 .15rem rgba(255,127,150,.15);
}

/* IMAGE CARDS */
.rel-img-card {
  background: #fff;
  border: 1px solid #f0d6da;
  border-radius: 14px;
  padding: 10px;
  text-align: center;
}

.rel-img-preview {
  width: 100%;
  height: 120px;
  object-fit: cover;
  border-radius: 10px;
  margin-bottom: 8px;
}

.rel-img-placeholder {
  height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fff3f5;
  border-radius: 10px;
  color: #c08a92;
  font-size: .85rem;
  margin-bottom: 8px;
}

.rel-file {
  font-size: .85rem;
}

/* SAVE BUTTON */
.rel-save-btn {
  background: linear-gradient(135deg,#ff7f96,#ff5c7a);
  color: #fff;
  border-radius: 999px;
  padding: 8px 20px;
  box-shadow: 0 8px 22px rgba(255,90,120,.35);
}

.rel-save-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 28px rgba(255,90,120,.45);
}

</style>


<%- include("partials/footer") %>