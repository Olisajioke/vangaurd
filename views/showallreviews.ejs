<%- include("partials/header") %>

<!-- Hero Section -->
<section class="hero-reviews d-flex align-items-center justify-content-center text-center text-white" style="background:
       linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.6)),
       url('/images/article_osaf.png') center/cover no-repeat;">
  <div class="hero-overlay"></div>
  <div class="container position-relative">
    <h1 class="display-5 fw-bold">Clinic Reviews</h1>
    <p class="lead mb-4">Honest experiences from optometrists across the Kingdom</p>
    <a href="/reviews/new" class="btn btn-success btn-lg">Write a Review</a>
  </div>
</section>

<div class="container my-5">
  <div class="row mb-2">
    <% reviews.forEach(r => { %>
      <div class="col-md-6">
        <div class="row g-0 border rounded overflow-hidden mb-4 shadow-sm h-100">

          <!-- Text -->
          <div class="col p-4 d-flex flex-column">
            <strong class="d-inline-block mb-2 text-success-emphasis">
              Rating: ‚≠ê <%= r.rating %>
            </strong>

            <h3 class="mb-0"><%= r.clinic_name %></h3>

            <div class="mb-1 text-body-secondary">
              <%= r.created_at 
                    ? new Date(r.created_at).toLocaleDateString("en-GB") 
                    : "" %>
            </div>

            <p class="card-text mb-auto">
              <%= r.recommendation 
                    ? r.recommendation.substring(0, 120) + "..." 
                    : "No review text available." %>
            </p>

            <a href="/reviews/<%= r.post_id %>"
              class="icon-link gap-1 icon-link-hover stretched-link">
              Continue reading
            </a>
          </div>

          <!-- Image -->
          <div class="col-4 col-md-3 col-lg-4">
            <img src="<%= r.image_url || '/images/write.jpg' %>" 
                alt="Clinic image"
                class="img-fluid h-100 w-100"
                style="object-fit:cover;">
          </div>

        </div>
      </div>
    <% }) %>
  </div>
</div>

<style>
/* Hero */
.hero-reviews {
  height: 45vh;
  background: url('/images/clinic-hero.jpg') center/cover no-repeat;
  position: relative;
}
.hero-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.55);
}

/* Flip cards */
.flip-card {
  perspective: 1000px;
  height: 200px;
}
.flip-card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}
.flip-card:hover .flip-card-inner {
  transform: rotateY(180deg);
}
.flip-card-front {
  background: linear-gradient(135deg, #d4af37, #c9a227);
  color: #1a1a1a;
}

.flip-card-front,

.flip-card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: .75rem;
}
.flip-card-back {
  transform: rotateY(180deg);
}
.border {
  border-color: rgba(201,162,39,.4) !important;
}

</style>

<%- include("partials/footer") %>
