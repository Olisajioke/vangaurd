<%- include("partials/header") %>

<!-- Hero Section -->
<section class="hero-reviews d-flex align-items-center justify-content-center text-center text-white" style="background:
       linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.6)),
       url('/images/article_osaf.png') center/cover no-repeat;">
  <div class="hero-overlay"></div>
  <div class="container position-relative">
    <h1 class="display-5 fw-bold">Clinic Reviews</h1>
    <p class="lead mb-4">Honest experiences from optometrists across the Kingdom</p>
    <a href="/reviews/new" class="btn btn-success btn-lg">Write a Review</a>
  </div>
</section>

<div class="container my-5">
  <div class="row g-4">
    <% reviews.forEach(r => { %>
      <div class="col-md-6 col-lg-4">
        <div class="flip-card">
          <div class="flip-card-inner">

            <!-- Front -->
            <div class="flip-card-front card shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title mb-2"><%= r.clinic_name %></h5>
                <p class="card-text">Rating: ‚≠ê <%= r.rating %></p>
                 <p class="card-text">
                    Reviewed on: 
                    <%= r.created_at ? new Date(r.created_at).toLocaleDateString() : "N/A" %>
                  </p>
              </div>
            </div>

            <!-- Back -->
            <div class="flip-card-back card text-center text-white bg-success h-100">
              <div class="card-body d-flex flex-column justify-content-center">
                <h5 class="mb-3">See full review</h5>
                <a href="/reviews/<%= r.post_id %>" class="btn btn-light">View Review</a>
              </div>
            </div>

          </div>
        </div>
      </div>
    <% }) %>
  </div>
</div>

<style>
/* Hero */
.hero-reviews {
  height: 45vh;
  background: url('/images/clinic-hero.jpg') center/cover no-repeat;
  position: relative;
}
.hero-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.55);
}

/* Flip cards */
.flip-card {
  perspective: 1000px;
  height: 200px;
}
.flip-card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}
.flip-card:hover .flip-card-inner {
  transform: rotateY(180deg);
}
.flip-card-front {
  background: linear-gradient(135deg, #d4af37, #c9a227);
  color: #1a1a1a;
}

.flip-card-front,

.flip-card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: .75rem;
}
.flip-card-back {
  transform: rotateY(180deg);
}
</style>

<%- include("partials/footer") %>
