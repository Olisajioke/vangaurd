<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vanguard Optometrists</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/styles/style.css">
  <link rel="stylesheet" href="/styles/layout.css">
  <link rel="stylesheet" href="/styles/content.css">
</head>

<body>

<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
  <div class="container-fluid px-5">
    <!-- BRAND -->
    <a class="navbar-brand d-flex align-items-center gap-2 fw-bold" href="/">
      <svg xmlns="http://www.w3.org/2000/svg"
           width="32" height="32"
           fill="currentColor"
           class="bi bi-eyeglasses"
           viewBox="0 0 16 16">
        <path d="M4 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4m2.625.547a3 3 0 0 0-5.584.953H.5a.5.5 0 0 0 0 1h.541A3 3 0 0 0 7 8a1 1 0 0 1 2 0 3 3 0 0 0 5.959.5h.541a.5.5 0 0 0 0-1h-.541a3 3 0 0 0-5.584-.953A2 2 0 0 0 8 6c-.532 0-1.016.208-1.375.547M14 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0"/>
      </svg>
      OptVanguards
    </a>

    <!-- HAMBURGER -->
    <button class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarContent"
            aria-controls="navbarContent"
            aria-expanded="false"
            aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- COLLAPSIBLE AREA -->
    <div class="collapse navbar-collapse" id="navbarContent">

      <!-- LEFT NAV -->
      <ul class="navbar-nav ms-lg-3 mb-2 mb-lg-0">

        <!-- PROFESSIONAL -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle d-flex align-items-center gap-2"
             href="#"
             role="button"
             data-bs-toggle="dropdown">
            <i class="fas fa-user-md text-primary"></i>
            Professional
          </a>

          <ul class="dropdown-menu shadow border-0 mt-2 p-2">
            <li>
              <a class="dropdown-item d-flex align-items-center gap-2"
                 href="<%= userId ? '/showjobs' : '/login' %>">
                <i class="fas fa-briefcase text-success"></i>
                Jobs
              </a>
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center gap-2"
                 href="<%= userId ? '/articles' : '/login' %>">
                <i class="fas fa-book-medical text-info"></i>
                Articles
              </a>
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center gap-2"
                 href="<%= userId ? '/reviews' : '/login' %>">
                <i class="fas fa-hospital text-danger"></i>
                Clinic Reviews
              </a>
            </li>
          </ul>
        </li>

        <!-- RESOURCES -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle d-flex align-items-center gap-2"
             href="#"
             role="button"
             data-bs-toggle="dropdown">
            <i class="fas fa-layer-group"></i>
            Resources
          </a>

          <ul class="dropdown-menu shadow border-0 mt-2 p-2">
            <li>
              <a class="dropdown-item d-flex align-items-center gap-2" href="#">
                <i class="fas fa-language text-primary"></i>
                Simple Arabic Phrases
              </a>
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center gap-2" href="#">
                <i class="fas fa-clock text-success"></i>
                Learn Prayer Times
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item d-flex align-items-center gap-2" href="#">
                <i class="fas fa-scale-balanced text-danger"></i>
                Professional Ethics
              </a>
            </li>
          </ul>
        </li>

        <!-- MARKET -->
        <li class="nav-item">
          <a class="nav-link d-flex align-items-center gap-2"
             href="<%= userId ? '/market' : '/login' %>">
            <i class="fa-solid fa-store"></i>
            Market
          </a>
        </li>

          <!-- RELATIONSHIPS -->
        <li class="nav-item">
          <a class="nav-link d-flex align-items-center gap-2"
            href="<%= userId ? '/relationships' : '/login' %>">
            <i class="fa-solid fa-users text-info"></i>
            Community
          </a>
        </li>

      </ul>

        <!-- RIGHT NAV -->
<ul class="navbar-nav ms-auto mb-2 mb-lg-0">

  <% if (userId) { %>

  <!-- USER DROPDOWN -->
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle d-flex align-items-center gap-2"
       href="#"
       role="button"
       data-bs-toggle="dropdown">
      <i class="fa-solid fa-user-circle text-primary"></i>
      <span class="fw-semibold"><%= userName %></span>
    </a>

    <ul class="dropdown-menu dropdown-menu-end shadow border-0 mt-2 p-2">
      <li>
        <a class="dropdown-item d-flex align-items-center gap-2" href="/profile">
          <i class="fa-solid fa-user"></i>
          My Profile
        </a>
      </li>
      <li>
        <a class="dropdown-item d-flex align-items-center gap-2" href="/saved">
          <i class="fa-solid fa-heart text-danger"></i>
          Saved Items
        </a>
      </li>
      <li><hr class="dropdown-divider"></li>
      <li>
        <form action="/logout" method="POST">
          <button class="dropdown-item d-flex align-items-center gap-2 text-danger">
            <i class="fa-solid fa-right-from-bracket"></i>
            Logout
          </button>
        </form>
      </li>
    </ul>
  </li>

  <!-- ADMIN PANEL (aligned now) -->
    <% if (userRole === 'admin') { %>
      <li class="nav-item">
        <a class="nav-link d-flex align-items-center gap-2"
          href="/admin">
          <i class="fa-solid fa-shield-halved text-warning"></i>
          Admin Panel
        </a>
      </li>
    <% } %>

    <% } else { %>

      <!-- LOGIN -->
      <li class="nav-item">
        <a class="nav-link d-flex align-items-center gap-2"
          href="/login">
          <i class="fa-solid fa-right-to-bracket"></i>
          Login
        </a>
      </li>

    <% } %>

    </ul>
  </div>
</nav>
<main>

