<div class="modal fade" id="editUserModal-<%= user.id %>" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

      <form action="/edituser/<%= user.id %>?_method=PUT"
            method="POST"
            enctype="multipart/form-data">

        <div class="modal-header">
          <h5 class="modal-title">Edit Profile</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">

          <!-- First Name -->
          <div class="form-floating mb-3">
            <input type="text"
                   class="form-control"
                   name="fName"
                   value="<%= user.fname || '' %>"
                   placeholder="First Name">
            <label>First Name</label>
          </div>

          <!-- Last Name -->
          <div class="form-floating mb-3">
            <input type="text"
                   class="form-control"
                   name="lName"
                   value="<%= user.lname || '' %>"
                   placeholder="Last Name">
            <label>Last Name</label>
          </div>

          <!-- Location -->
          <div class="form-floating mb-3">
            <input type="text"
                   class="form-control"
                   name="location"
                   value="<%= user.location || '' %>"
                   placeholder="Location">
            <label>Location</label>
          </div>

          <!-- Email -->
          <div class="form-floating mb-3">
            <input type="email"
                   class="form-control"
                   name="email"
                   value="<%= user.email || '' %>"
                   placeholder="Email">
            <label>Email Address</label>
          </div>

          <!-- Password -->
          <div class="form-floating mb-3">
            <input type="password"
                   class="form-control"
                   name="password"
                   placeholder="New Password">
            <label>New Password (leave blank to keep)</label>
          </div>

          <!-- Confirm Password -->
          <div class="form-floating mb-3">
            <input type="password"
                   class="form-control"
                   name="confirmPassword"
                   placeholder="Confirm Password">
            <label>Confirm New Password</label>
          </div>

          <!-- Current Photo -->
          <div class="text-center mb-3">
            <img src="<%= user.profilepic ? '/uploads/' + user.profilepic : '/images/default-avatar.png' %>"
                 class="rounded-circle shadow"
                 style="width:90px;height:90px;object-fit:cover;">
          </div>

          <!-- Upload New -->
          <div class="mb-3">
            <label class="form-label">Change Profile Photo</label>
            <input class="form-control"
                   type="file"
                   name="profilepic"
                   accept="image/*">
            <small class="text-muted">Leave empty to keep current photo</small>
          </div>

          <!-- Remove -->
          <div class="form-check mb-2">
            <input class="form-check-input"
                   type="checkbox"
                   name="removePhoto"
                   id="removePhoto-<%= user.id %>">
            <label class="form-check-label"
                   for="removePhoto-<%= user.id %>">
              Remove current photo
            </label>
          </div>

        </div>

        <div class="modal-footer">
          <button class="btn btn-primary w-100">Update Profile</button>
        </div>

      </form>

    </div>
  </div>
</div>
